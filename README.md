#Wall-E:一个小型的防空机器人



##

![walle](http://git.oschina.net/uploads/images/2016/0610/164802_a5395c4c_359863.jpeg "walle")



## 一、组成模块



###1. 障碍感知模块（Obstacle Perception: OP)

   

- 功能：感知机器人自身前、后、左、右以及上方（无人机）障碍，提供实时深度反馈

- 方案：DJI Guidance



###2. 目标感知模块（Target Perception: TP)



- 功能：感知离机器人视场中心最近的一个目标

   ![target](http://git.oschina.net/uploads/images/2016/0610/162501_ff4b6884_359863.png "感知离机器人视场中心最近的一个目标")

                      

                      s = sqrt(x^2+y^2+z^2)



                      t = candidates|min(s)

                   

- 方案：USB摄像头+(2D)低速检测+(2D)高速跟踪,三维建模



###3. 自主巡航模块（Automatic Navigation: AN)



- 功能：提供在没有发现目标的情况下机器人的控制策略(在避障背景下)

- 方案：以恒定角速度进行圆周环扫，扫描完一周后，如未目标发现，则换另一地点继续环扫



###4. 自主跟踪模块（Automatic Tracking: AT)



- 功能：提供在已发现目标的情况下机器人的控制策略（在避障背景下）

- 方案：  

    总体原则：保持目标处在视野中心并有合适大小  

    具体实现：  

    a. 目标中心和视野中心的x（横向）坐标差dx反馈作用于云台pan轴调整偏转角  

    b. 目标中心和视野中心的y（纵向）坐标差dy反馈作用于云台tilt轴调整俯仰角  

    c. 目标在视野中大小（面积）和预先标定大小之比dz反馈作用于机器人底盘前后（zoom）运动



##二、初始化



###1. 初始化目标感知（OP)模块



- 如果没有指定OP实现方案，取默认（低速检测+高速跟踪模式）

- 如果采用低速检测+高速跟踪模式，初始化#2,#3



###2. 初始化检测器



- 如没有指定Detector的实现方案，取默认（HOG+SVM Detector）



###3. 初始化跟踪器



- 如没有指定Tracker的实现方案，取默认（KCF Tracker)



###4. 初始化机器人控制接口



- 如无指定实现方案，取默认（Wall-E)



###5. 握手



- 主机通过控制接口向机器人发出握手消息，机器人回应后主机取得机器人控制权

- 控制优先级：远程控制(RC)>主机控制(HC),故主机控制模式下需关闭RC控制器
